# Global overrides
alias -g -- -h='-h 2>&1 | bat --language=help --style=plain'
alias -g -- --help='--help 2>&1 | bat --language=help --style=plain'

# Custom Aliases
alias vi="nvim"
alias vim="nvim"
alias szshrc="source ~/.zshrc"
alias zshrc="vim ~/.zshrc"
alias l="tree --dirsfirst --metafirst --si -agpsuACDL 1"
alias ll="tree --dirsfirst --metafirst --si -gpsuACDL 1"

# Git aliases
alias gitClean="git branch --merged | egrep -v \"(^\*|master|main|develop|production)\" | xargs git branch -d"
alias preRelease="gcm; ggpull; gcd; ggpull"
alias gpt="git push && git push --tags"
alias gfpub="git flow feature publish \$(git branch | sed -n '/\* feature\//s///p')"
alias gbpub="git flow bugfix publish \$(git branch | sed -n '/\* bugfix\//s///p')"
alias gflbs="git flow bugfix start"

function ac(){
  git add .
  git commit -m "$1"
}

function acp(){
  git add .
  git commit -m "$1"
  git push
}

# Kill all docker containers with "none" tags
alias dkill="docker rmi $(docker images | grep '^<none>' | awk '{print $3}')"

# Tells you what's listening on a given port
# credit: https://stackoverflow.com/a/30029855/3264790
function listening() {
    if [ $# -eq 0 ]; then
        sudo lsof -iTCP -sTCP:LISTEN -n -P
    elif [ $# -eq 1 ]; then
        sudo lsof -iTCP -sTCP:LISTEN -n -P | grep -i --color $1
    else
        echo "Usage: listening [pattern]"
    fi
}

# kill process on given port
function killport() {
  if [ $# -eq 0 ]; then
    echo "Usage: killport PORT_TO_KILL"
    return
  fi
  
  lsof -t -i tcp:$1 | xargs kill
}

